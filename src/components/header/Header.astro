---
import './header.css';
const { origin } = Astro.props;
import Logo from '../Logo.astro';
---

<header class="header">
    <div class="header__container">
        <Logo name="Joy Huré" />
        
        <!-- Bouton hamburger pour mobile -->
        <button class="menu__btn" id="menu-toggle" aria-label="Toggle navigation">
            <iconify-icon
                icon="lucide:menu"
                class="hamburger-icon"
                width="27"
                height="27">
            </iconify-icon>
        </button>

        <nav class="links">
            <ul class="header__list" id="menu-list">
                {
                    origin.map((data: any) => (
                        <li>
                            <a class="menu__link" href={data.link}>
                                <span class="icon__container">
                                    {data.content}
                                </span>
                            </a>
                        </li>
                    ))
                }
            </ul>
        </nav>
    </div>
</header>

<script>
    const menuToggle = document.getElementById('menu-toggle');
    const menuList = document.getElementById('menu-list');

    menuToggle?.addEventListener('click', () => {
        menuList?.classList.toggle('active');
    });

    // Fermer le menu si on clique ailleurs
    document.addEventListener('click', (e) => {
        if (!menuToggle?.contains(e.target as Node) && !menuList?.contains(e.target as Node)) {
            menuList?.classList.remove('active');
        }
    });

    // Effet néon sur les liens du menu + fermer le menu
    const menuLinks = document.querySelectorAll('.menu__link');
    
    menuLinks.forEach(link => {
        link.addEventListener('click', (event) => {
            const target = event.currentTarget as HTMLElement;
            
            // Retirer la classe de tous les liens
            menuLinks.forEach(l => l.classList.remove('neon-active'));
            
            // Ajouter la classe au lien cliqué
            target.classList.add('neon-active');
            
            // Fermer le menu mobile après l'animation (600ms + petit délai)
            setTimeout(() => {
                menuList?.classList.remove('active');
            }, 300);
            
            // Retirer la classe après l'animation
            setTimeout(() => {
                target.classList.remove('neon-active');
            }, 600);
        });
    });
</script>
